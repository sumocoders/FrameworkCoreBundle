{% extends 'knp_menu.html.twig' %}

{% block label %}
  {% if item.labelAttributes.icon is defined %}
    <i class="{{ item.labelAttributes.icon }} menu-item-icon"></i>
  {% else %}
    <i class="bi bi-circle-fill menu-item-icon"></i>
  {% endif %}
  {% if item.parent.name == 'root' and item.hasChildren %}
    <i class="bi bi-chevron-down"></i>
  {% endif %}
  <div
    class="nav-link-text">{{ item.label|trans(item.getExtra('translation_params', {}), item.getExtra('translation_domain', 'messages'))|ucfirst }}</div>
  {% if item.attributes.pill is defined and item.attributes.pill %}
    <span class="badge badge-pill text-bg-white ms-2"><span class="badge-content">{{ item.attributes.pill }}</span></span>
  {% endif %}
{% endblock %}

{% block item %}
  {% if item.parent.name == 'root' and item.hasChildren %}
    {% set item = item.setLinkAttributes(item.linkAttributes|merge({class: item.linkAttribute('class') ~ ' nav-link d-flex align-items-center dropdown-toggle', 'data-bs-toggle': 'dropdown', role: 'button', 'aria-expanded': false})) %}
    {% set item = item.setAttribute('class', item.attribute('class') ~ ' dropdown nav-item') %}
    {% set item = item.setChildrenAttributes(item.childrenAttributes|merge({class: item.childrenAttribute('class') ~ ' dropdown-menu', role: 'menu'})) %}
  {% elseif item.parent.name == 'root' and not item.hasChildren %}
    {% set item = item.setAttribute('class', item.attribute('class') ~ ' nav-item') %}
    {% set item = item.setLinkAttribute('class', item.linkAttribute('class') ~ ' nav-link d-flex align-items-center') %}
  {% elseif item.parent.name != 'root' and not item.hasChildren %}
    {% set item = item.setLinkAttribute('class', item.linkAttribute('class') ~ ' dropdown-item d-flex align-items-center') %}
  {% endif %}
  {{ parent() }}
{% endblock %}
